function t(t,e){var s=document.createElement("div");switch(arguments.length){case 1:return t in s.style;case 2:return s.style[t]=e,!!s.style[t];default:return!1}}function e(s){if(void 0===s&&(s={blur:6,mode:"auto",images:[]}),!(this instanceof e))return new e(s);"number"==typeof s&&(s={blur:s,images:arguments[1],mode:"auto"}),this.options=s,this.blur=s.blur||6,this.mode=s.mode||"css",console.log(),this.$els=1==s.images.nodeType?[s.images]:[].slice.call(s.images),"auto"==this.mode?t("filter","blur(1px)")?this.useCSSMode():this.useCanvasMode():"css"==this.mode?(this.blur=this.blur/2,this.useCSSMode()):this.useCanvasMode()}e.prototype.useCSSMode=function(){var t=this;console.log(this.$els),this.$els.map((function(e){console.log("el",e),e.src=e.dataset?e.dataset.src:e.getAttribute("data-src"),e.style.filter=e.style["-webkit-filter"]="blur("+t.blur+"px)"}))},e.prototype.useCanvasMode=function(){var t=this;this.imageType=this.options.imageType||"image/jpeg",function(t){var e=[],s=0,o=function(t){};function a(){++s==t.length&&o(e)}return 0===(t="object"!=typeof t?[t]:t).length&&o(e),t.map((function(t){var s=new Image;s.crossOrigin="*",s.src=t.dataset?t.dataset.src:t.getAttribute("data-src"),s.onload=a,s.onerror=a,e.push(s)})),{done:function(t){o=arguments[0]||o}}}(this.$els).done((function(e){e.map((function(e,s){t.$els[s].src=t.getDataURL(e)}))}))},e.prototype.blurify=function(t,e){var s=t.getContext("2d");s.globalAlpha=1/(2*+e);for(var o=-e;o<=e;o+=2)for(var a=-e;a<=e;a+=2)s.drawImage(t,a,o),a>=0&&o>=0&&s.drawImage(t,-(a-1),-(o-1));s.globalAlpha=1},e.prototype.getDataURL=function(t){var e=document.createElement("canvas"),s=e.getContext("2d");return e.width=t.width,e.height=t.height,s.drawImage(t,0,0),this.blurify(e,this.blur),e.toDataURL(this.imageType)};export default e;
//# sourceMappingURL=blurify.es.min.js.map
