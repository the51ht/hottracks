!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).panzoom=e()}}(function(){return function(){return function e(n,t,o){function r(a,c){if(!t[a]){if(!n[a]){var u="function"==typeof require&&require;if(!c&&u)return u(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var s=t[a]={exports:{}};n[a][0].call(s.exports,function(e){return r(n[a][1][e]||e)},s,s.exports,e,n,t,o)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)r(o[a]);return r}}()({1:[function(e,n,t){"use strict";var o=e("wheel"),r=e("amator"),i=e("ngraph.events"),a=e("./lib/kinetic.js"),c=e("./lib/createTextSelectionInterceptor.js"),u=c(),f=c(!0),s=e("./lib/transform.js"),l=e("./lib/svgController.js"),m=e("./lib/domController.js"),d=1,p=1.75,h=300;function v(e,n){var t=(n=n||{}).controller;if(t||(e instanceof SVGElement&&(t=l(e,n)),e instanceof HTMLElement&&(t=m(e,n))),!t)throw new Error("Cannot create panzoom for the current type of dom element");var c=t.getOwner(),v={x:0,y:0},g=!1,E=new s;t.initTransform&&t.initTransform(E);var C,T="function"==typeof n.filterKey?n.filterKey:w,S="number"==typeof n.pinchSpeed?n.pinchSpeed:1,A=n.bounds,k="number"==typeof n.maxZoom?n.maxZoom:Number.POSITIVE_INFINITY,M="number"==typeof n.minZoom?n.minZoom:0,L="number"==typeof n.boundsPadding?n.boundsPadding:.05,j="number"==typeof n.zoomDoubleClickSpeed?n.zoomDoubleClickSpeed:p,F=n.beforeWheel||w,B=n.beforeMouseDown||w,z="number"==typeof n.zoomSpeed?n.zoomSpeed:d,D=y(n.transformOrigin),O=n.enableTextSelection?f:u;!function(e){var n=typeof e;if("undefined"===n||"boolean"===n)return;if(!(x(e.left)&&x(e.top)&&x(e.bottom)&&x(e.right)))throw new Error("Bounds object is not valid. It can be: undefined, boolean (true|false) or an object {left, top, right, bottom}")}(A),n.autocenter&&function(){var e,n,o=0,r=0,i=Q();if(i)o=i.left,r=i.top,e=i.right-i.left,n=i.bottom-i.top;else{var a=c.getBoundingClientRect();e=a.width,n=a.height}var u=t.getBBox();if(0===u.width||0===u.height)return;var f=n/u.height,s=e/u.width,l=Math.min(s,f);E.x=-(u.left+u.width/2)*l+e/2+o,E.y=-(u.top+u.height/2)*l+n/2+r,E.scale=l}();var q,N,I,Z,P,R,V,W=0,Y=!1,G=!1;Z="smoothScroll"in n&&!n.smoothScroll?{start:w,stop:w,cancel:w}:a(function(){return{x:E.x,y:E.y}},function(e,n){Ce(),X(e,n)},n.smoothScroll);var K=!1;oe();var U={dispose:function(){re()},moveBy:te,moveTo:X,centerOn:function(e){var n=e.ownerSVGElement;if(!n)throw new Error("ui element is required to be within the scene");var t=e.getBoundingClientRect(),o=t.left+t.width/2,r=t.top+t.height/2,i=n.getBoundingClientRect(),a=i.width/2-o,c=i.height/2-r;te(a,c,!0)},zoomTo:Ee,zoomAbs:ne,smoothZoom:xe,smoothZoomAbs:function(e,n,t){var o={scale:E.scale},i={scale:t};Z.cancel(),Ce(),R=r(o,i,{step:function(t){ne(e,n,t.scale)}})},showRectangle:function(e){var n=c.getBoundingClientRect(),t=H(n.width,n.height),o=e.right-e.left,r=e.bottom-e.top;if(!Number.isFinite(o)||!Number.isFinite(r))throw new Error("Invalid rectangle");var i=t.x/o,a=t.y/r,u=Math.min(i,a);E.x=-(e.left+o/2)*u+t.x/2,E.y=-(e.top+r/2)*u+t.y/2,E.scale=u},pause:function(){re(),K=!0},resume:function(){K&&(oe(),K=!1)},isPaused:function(){return K},getTransform:function(){return E},getMinZoom:function(){return M},setMinZoom:function(e){M=e},getMaxZoom:function(){return k},setMaxZoom:function(e){k=e},getTransformOrigin:function(){return D},setTransformOrigin:function(e){D=y(e)},getZoomSpeed:function(){return z},setZoomSpeed:function(e){if(!Number.isFinite(e))throw new Error("Zoom speed should be a number");z=e}};return i(U),U;function H(e,n){if(t.getScreenCTM){var o=t.getScreenCTM(),r=o.a,i=o.d,a=o.e,c=o.f;v.x=e*r-a,v.y=n*i-c}else v.x=e,v.y=n;return v}function X(e,n){E.x=e,E.y=n,J(),Me("pan"),$()}function _(e,n){X(E.x+e,E.y+n)}function J(){var e=Q();if(e){var n,o,r,i,a=!1,c=(n=t.getBBox(),r=n.left,i=n.top,{left:(o={x:r*E.scale+E.x,y:i*E.scale+E.y}).x,top:o.y,right:n.width*E.scale+o.x,bottom:n.height*E.scale+o.y}),u=e.left-c.right;return u>0&&(E.x+=u,a=!0),(u=e.right-c.left)<0&&(E.x+=u,a=!0),(u=e.top-c.bottom)>0&&(E.y+=u,a=!0),(u=e.bottom-c.top)<0&&(E.y+=u,a=!0),a}}function Q(){if(A){if("boolean"==typeof A){var e=c.getBoundingClientRect(),n=e.width,t=e.height;return{left:n*L,top:t*L,right:n*(1-L),bottom:t*(1-L)}}return A}}function $(){g=!0,C=window.requestAnimationFrame(ie)}function ee(e,n,t){if(b(e)||b(n)||b(t))throw new Error("zoom requires valid numbers");var o=E.scale*t;if(o<M){if(E.scale===M)return;t=M/E.scale}if(o>k){if(E.scale===k)return;t=k/E.scale}var r=H(e,n);(E.x=r.x-t*(r.x-E.x),E.y=r.y-t*(r.y-E.y),A&&1===L&&1===M)?(E.scale*=t,J()):J()||(E.scale*=t);Me("zoom"),$()}function ne(e,n,t){ee(e,n,t/E.scale)}function te(e,n,t){if(!t)return _(e,n);P&&P.cancel();var o=0,i=0;P=r({x:0,y:0},{x:e,y:n},{step:function(e){_(e.x-o,e.y-i),o=e.x,i=e.y}})}function oe(){c.addEventListener("mousedown",de,{passive:!1}),c.addEventListener("dblclick",me,{passive:!1}),c.addEventListener("touchstart",ce,{passive:!1}),c.addEventListener("keydown",ae,{passive:!1}),o.addWheelListener(c,ge,{passive:!1}),$()}function re(){o.removeWheelListener(c,ge),c.removeEventListener("mousedown",de),c.removeEventListener("keydown",ae),c.removeEventListener("dblclick",me),c.removeEventListener("touchstart",ce),C&&(window.cancelAnimationFrame(C),C=0),Z.cancel(),ve(),ye(),O.release(),Ae()}function ie(){g&&(g=!1,t.applyTransform(E),Me("transform"),C=0)}function ae(e){var n=0,t=0,o=0;if(38===e.keyCode?t=1:40===e.keyCode?t=-1:37===e.keyCode?n=1:39===e.keyCode?n=-1:189===e.keyCode||109===e.keyCode?o=1:187!==e.keyCode&&107!==e.keyCode||(o=-1),!T(e,n,t,o)){if(n||t){e.preventDefault(),e.stopPropagation();var r=c.getBoundingClientRect();te(.05*(i=Math.min(r.width,r.height))*n,.05*i*t)}if(o){var i,a=Te(100*o);Ee((i=D?be():{x:(u=c.getBoundingClientRect()).width/2,y:u.height/2}).x,i.y,a)}var u}}function ce(e){if(function(e){if(n.onTouch&&!n.onTouch(e))return;e.stopPropagation(),e.preventDefault()}(e),1===e.touches.length)return function(e){var n=we(e.touches[0]);q=n.x,N=n.y,Z.cancel(),ue()}(e,e.touches[0]);2===e.touches.length&&(I=le(e.touches[0],e.touches[1]),V=!0,ue())}function ue(){Y||(Y=!0,document.addEventListener("touchmove",fe),document.addEventListener("touchend",se),document.addEventListener("touchcancel",se))}function fe(e){if(1===e.touches.length){e.stopPropagation();var n=H((s=we(e.touches[0])).x,s.y),t=n.x-q,o=n.y-N;0!==t&&0!==o&&Se(),q=n.x,N=n.y,te(t,o)}else if(2===e.touches.length){V=!0;var r=e.touches[0],i=e.touches[1],a=le(r,i),c=1+(a/I-1)*S,u=we(r),f=we(i);if(q=(u.x+f.x)/2,N=(u.y+f.y)/2,D){var s=be();q=s.x,N=s.y}Ee(q,N,c),I=a,e.stopPropagation(),e.preventDefault()}}function se(e){if(e.touches.length>0){var n=we(e.touches[0]);q=n.x,N=n.y}else{var t=new Date;if(t-W<h)if(D)xe((n=be()).x,n.y,j);else xe(q,N,j);W=t,Y=!1,Ae(),ye()}}function le(e,n){var t=e.clientX-n.clientX,o=e.clientY-n.clientY;return Math.sqrt(t*t+o*o)}function me(e){!function(e){n.onDoubleClick&&!n.onDoubleClick(e)||(e.preventDefault(),e.stopPropagation())}(e);var t=we(e);D&&(t=be()),xe(t.x,t.y,j)}function de(e){if(!B(e)){if(Y)return e.stopPropagation(),!1;if(1===e.button&&null!==window.event||0===e.button){Z.cancel();var n=we(e),t=H(n.x,n.y);return q=t.x,N=t.y,document.addEventListener("mousemove",pe),document.addEventListener("mouseup",he),O.capture(e.target||e.srcElement),!1}}}function pe(e){if(!Y){Se();var n=we(e),t=H(n.x,n.y),o=t.x-q,r=t.y-N;q=t.x,N=t.y,te(o,r)}}function he(){O.release(),Ae(),ve()}function ve(){document.removeEventListener("mousemove",pe),document.removeEventListener("mouseup",he),G=!1}function ye(){document.removeEventListener("touchmove",fe),document.removeEventListener("touchend",se),document.removeEventListener("touchcancel",se),G=!1,V=!1}function ge(e){if(!F(e)){Z.cancel();var n=e.deltaY;e.deltaMode>0&&(n*=100);var t=Te(n);if(1!==t){var o=D?be():we(e);Ee(o.x,o.y,t),e.preventDefault()}}}function we(e){var n=c.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}function xe(e,n,t){var o=E.scale,i={scale:o},a={scale:t*o};Z.cancel(),Ce(),R=r(i,a,{step:function(t){ne(e,n,t.scale)},done:ke})}function be(){var e=c.getBoundingClientRect();return{x:e.width*D.x,y:e.height*D.y}}function Ee(e,n,t){return Z.cancel(),Ce(),ee(e,n,t)}function Ce(){R&&(R.cancel(),R=null)}function Te(e){return 1-Math.sign(e)*Math.min(.25,Math.abs(z*e/128))}function Se(){G||(Me("panstart"),G=!0,Z.start())}function Ae(){G&&(V||Z.stop(),Me("panend"))}function ke(){Me("zoomend")}function Me(e){U.fire(e,U)}}function y(e){if(e)return"object"==typeof e?(x(e.x)&&x(e.y)||g(e),e):void g()}function g(e){throw console.error(e),new Error(["Cannot parse transform origin.","Some good examples:",'  "center center" can be achieved with {x: 0.5, y: 0.5}','  "top center" can be achieved with {x: 0.5, y: 0}','  "bottom right" can be achieved with {x: 1, y: 1}'].join("\n"))}function w(){}function x(e){return Number.isFinite(e)}function b(e){return Number.isNaN?Number.isNaN(e):e!=e}n.exports=v,function(){if("undefined"!=typeof document){var e=document.getElementsByTagName("script");if(e){for(var n,t=0;t<e.length;++t){var o=e[t];if(o.src&&o.src.match(/\bpanzoom(\.min)?\.js/)){n=o;break}}if(n){var r=n.getAttribute("query");if(r){var i=n.getAttribute("name")||"pz",a=Date.now();!function e(){var t=document.querySelector(r);if(!t){var o=Date.now(),u=o-a;return u<2e3?void setTimeout(e,100):void console.error("Cannot find the panzoom element",i)}var f=function(e){for(var n=e.attributes,t={},o=0;o<n.length;++o){var r=n[o],i=c(r);i&&(t[i.name]=i.value)}return t}(n);console.log(f),window[i]=v(t,f)}()}}}}function c(e){if(e.name&&"p"===e.name[0]&&"z"===e.name[1]&&"-"===e.name[2])return{name:e.name.substr(3),value:JSON.parse(e.value)}}}()},{"./lib/createTextSelectionInterceptor.js":2,"./lib/domController.js":3,"./lib/kinetic.js":4,"./lib/svgController.js":5,"./lib/transform.js":6,amator:7,"ngraph.events":9,wheel:10}],2:[function(e,n,t){function o(e){return e.stopPropagation(),!1}function r(){}n.exports=function(e){if(e)return{capture:r,release:r};var n,t,i,a=!1;return{capture:function(e){a=!0,t=window.document.onselectstart,i=window.document.ondragstart,window.document.onselectstart=o,(n=e).ondragstart=o},release:function(){if(!a)return;a=!1,window.document.onselectstart=t,n&&(n.ondragstart=i)}}}},{}],3:[function(e,n,t){n.exports=function(e,n){if(!(e instanceof HTMLElement))throw new Error("svg element is required for svg.panzoom to work");var t=e.parentElement;if(!t)throw new Error("Do not apply panzoom to the detached DOM element. ");e.scrollTop=0,n.disableKeyboardInteraction||t.setAttribute("tabindex",0);return{getBBox:function(){return{left:0,top:0,width:e.clientWidth,height:e.clientHeight}},getOwner:function(){return t},applyTransform:function(n){e.style.transformOrigin="0 0 0",e.style.transform="matrix("+n.scale+", 0, 0, "+n.scale+", "+n.x+", "+n.y+")"}}}},{}],4:[function(e,n,t){(function(e){n.exports=function(n,t,o){"object"!=typeof o&&(o={});var r,i,a,c,u,f,s,l,m,d,p="number"==typeof o.minVelocity?o.minVelocity:5,h="number"==typeof o.amplitude?o.amplitude:.25,v="function"==typeof o.cancelAnimationFrame?o.cancelAnimationFrame:"function"==typeof e.cancelAnimationFrame?e.cancelAnimationFrame:clearTimeout,y="function"==typeof o.requestAnimationFrame?o.requestAnimationFrame:"function"==typeof e.requestAnimationFrame?e.requestAnimationFrame:function(e){return setTimeout(e,16)},g=342;return{start:function(){r=n(),f=m=c=s=0,i=new Date,v(a),v(d),a=y(w)},stop:function(){v(a),v(d);var e=n();u=e.x,l=e.y,i=Date.now(),(c<-p||c>p)&&(u+=f=h*c);(s<-p||s>p)&&(l+=m=h*s);d=y(x)},cancel:function(){v(a),v(d)}};function w(){var e=Date.now(),t=e-i;i=e;var o=n(),u=o.x-r.x,f=o.y-r.y;r=o;var l=1e3/(1+t);c=.8*u*l+.2*c,s=.8*f*l+.2*s,a=y(w)}function x(){var e=Date.now()-i,n=!1,o=0,r=0;f&&((o=-f*Math.exp(-e/g))>.5||o<-.5?n=!0:o=f=0),m&&((r=-m*Math.exp(-e/g))>.5||r<-.5?n=!0:r=m=0),n&&(t(u+o,l+r),d=y(x))}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,n,t){n.exports=function(e,n){if(!(e instanceof SVGElement))throw new Error("svg element is required for svg.panzoom to work");var t=e.ownerSVGElement;if(!t)throw new Error("Do not apply panzoom to the root <svg> element. Use its child instead (e.g. <g></g>). As of March 2016 only FireFox supported transform on the root element");n.disableKeyboardInteraction||t.setAttribute("tabindex",0);return{getBBox:function(){var n=e.getBBox();return{left:n.x,top:n.y,width:n.width,height:n.height}},getScreenCTM:function(){var e=t.getCTM();if(!e)return t.getScreenCTM();return e},getOwner:function(){return t},applyTransform:function(n){e.setAttribute("transform","matrix("+n.scale+" 0 0 "+n.scale+" "+n.x+" "+n.y+")")},initTransform:function(n){var o=e.getCTM();n.x=o.e,n.y=o.f,n.scale=o.a,t.removeAttributeNS(null,"viewBox")}}}},{}],6:[function(e,n,t){n.exports=function(){this.x=0,this.y=0,this.scale=1}},{}],7:[function(e,n,t){var o=e("bezier-easing"),r={ease:o(.25,.1,.25,1),easeIn:o(.42,0,1,1),easeOut:o(0,0,.58,1),easeInOut:o(.42,0,.58,1),linear:o(0,0,1,1)};function i(){}function a(){var e=new Set,n=new Set,t=0;return{next:o,cancel:o,clearAll:function(){e.clear(),n.clear(),cancelAnimationFrame(t),t=0}};function o(e){n.add(e),t||(t=requestAnimationFrame(r))}function r(){t=0;var o=n;n=e,(e=o).forEach(function(e){e()}),e.clear()}}n.exports=function(e,n,t){var o=Object.create(null),a=Object.create(null),c="function"==typeof(t=t||{}).easing?t.easing:r[t.easing];c||(t.easing&&console.warn("Unknown easing function in amator: "+t.easing),c=r.ease);var u="function"==typeof t.step?t.step:i,f="function"==typeof t.done?t.done:i,s=function(e){if(!e){var n="undefined"!=typeof window&&window.requestAnimationFrame;return n?{next:window.requestAnimationFrame.bind(window),cancel:window.cancelAnimationFrame.bind(window)}:{next:function(e){return setTimeout(e,1e3/60)},cancel:function(e){return clearTimeout(e)}}}if("function"!=typeof e.next)throw new Error("Scheduler is supposed to have next(cb) function");if("function"!=typeof e.cancel)throw new Error("Scheduler is supposed to have cancel(handle) function");return e}(t.scheduler),l=Object.keys(n);l.forEach(function(t){o[t]=e[t],a[t]=n[t]-e[t]});var m,d="number"==typeof t.duration?t.duration:400,p=Math.max(1,.06*d),h=0;return m=s.next(function n(){var t=c(h/p);h+=1,function(n){l.forEach(function(t){e[t]=a[t]*n+o[t]})}(t),h<=p?(m=s.next(n),u(e)):(m=0,setTimeout(function(){f(e)},0))}),{cancel:function(){s.cancel(m),m=0}}},n.exports.makeAggregateRaf=a,n.exports.sharedScheduler=a()},{"bezier-easing":8}],8:[function(e,n,t){var o=4,r=.001,i=1e-7,a=10,c=11,u=1/(c-1),f="function"==typeof Float32Array;function s(e,n){return 1-3*n+3*e}function l(e,n){return 3*n-6*e}function m(e){return 3*e}function d(e,n,t){return((s(n,t)*e+l(n,t))*e+m(n))*e}function p(e,n,t){return 3*s(n,t)*e*e+2*l(n,t)*e+m(n)}function h(e){return e}n.exports=function(e,n,t,s){if(!(0<=e&&e<=1&&0<=t&&t<=1))throw new Error("bezier x values must be in [0, 1] range");if(e===n&&t===s)return h;for(var l=f?new Float32Array(c):new Array(c),m=0;m<c;++m)l[m]=d(m*u,e,t);function v(n){for(var f=0,s=1,m=c-1;s!==m&&l[s]<=n;++s)f+=u;var h=f+(n-l[--s])/(l[s+1]-l[s])*u,v=p(h,e,t);return v>=r?function(e,n,t,r){for(var i=0;i<o;++i){var a=p(n,t,r);if(0===a)return n;n-=(d(n,t,r)-e)/a}return n}(n,h,e,t):0===v?h:function(e,n,t,o,r){var c,u,f=0;do{(c=d(u=n+(t-n)/2,o,r)-e)>0?t=u:n=u}while(Math.abs(c)>i&&++f<a);return u}(n,f,f+u,e,t)}return function(e){return 0===e?0:1===e?1:d(v(e),n,s)}}},{}],9:[function(e,n,t){n.exports=function(e){!function(e){if(!e)throw new Error("Eventify cannot use falsy object as events subject");for(var n=["on","fire","off"],t=0;t<n.length;++t)if(e.hasOwnProperty(n[t]))throw new Error("Subject cannot be eventified, since it already has property '"+n[t]+"'")}(e);var n=function(e){var n=Object.create(null);return{on:function(t,o,r){if("function"!=typeof o)throw new Error("callback is expected to be a function");var i=n[t];return i||(i=n[t]=[]),i.push({callback:o,ctx:r}),e},off:function(t,o){var r=void 0===t;if(r)return n=Object.create(null),e;if(n[t]){var i="function"!=typeof o;if(i)delete n[t];else for(var a=n[t],c=0;c<a.length;++c)a[c].callback===o&&a.splice(c,1)}return e},fire:function(t){var o,r=n[t];if(!r)return e;arguments.length>1&&(o=Array.prototype.splice.call(arguments,1));for(var i=0;i<r.length;++i){var a=r[i];a.callback.apply(a.ctx,o)}return e}}}(e);return e.on=n.on,e.off=n.off,e.fire=n.fire,e}},{}],10:[function(e,n,t){function o(e,n,t){e.addEventListener("wheel",n,t)}n.exports=o,n.exports.addWheelListener=o,n.exports.removeWheelListener=function(e,n,t){e.removeEventListener("wheel",n,t)}},{}]},{},[1])(1)});